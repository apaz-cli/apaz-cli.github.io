<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Inspiration</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <style type="text/css">
  /* https://github.com/markdowncss/retro/blob/master/css/retro.css */

  @font-face {
      font-family: "lemon";
      src: url('lemon.woff');
  }

  @media print {
      *, *:before, *:after {
          background: transparent !important;
          color: #000 !important;
          box-shadow: none !important;
          text-shadow: none !important;
      }
      a, a:visited { text-decoration: underline; }
      a[href]:after { content: " (" attr(href) ")"; }
      abbr[title]:after { content: " (" attr(title) ")"; }
      a[href^="#"]:after, a[href^="javascript:"]:after { content: ""; }
      pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
      thead { display: table-header-group; }
      tr, img { page-break-inside: avoid; }
      img { max-width: 100% !important; }
      p, h2, h3 { orphans: 3; widows: 3; }
      h2, h3 { page-break-after: avoid; }
  }
  a, a:visited { color: #01ff70; }
  a:hover, a:focus, a:active { color: #2ecc40; }
  .retro-no-decoration { text-decoration: none; }
  p, .retro-p {
      font-size: 1rem;
      margin-bottom: 1.3rem;
      /*text-indent: 50px*/
  }
  h1, .retro-h1, h2, .retro-h2, h3, .retro-h3, h4, .retro-h4 {
      margin: 1.414rem 0 .5rem;
      font-weight: inherit;
      line-height: 1.42;
  }
  h1, .retro-h1 {
      color: rgb(112, 221, 0);
      margin-top: 0;
      font-size: 3.998rem;
  }
  h2, .retro-h2 {
      color: rgb(112, 221, 0);
      margin-top: 0;
      font-size: 2.827rem;
  }
  h3, .retro-h3 {
      font-size: 1.999rem;
  }
  h4, .retro-h4 {
      font-size: 1.414rem;
  }
  h5, .retro-h5 {
      font-size: 1.121rem;
  }
  h6, .retro-h6 {
      font-size: .88rem;
  }
  small, .retro-small {
      font-size: .707em;
  }

  img, canvas, iframe, video, svg, select, textarea { max-width: 100%; }

  html,
  body {
      background-image: url(https://raw.githubusercontent.com/apaz-cli/apaz-cli.github.io/master/pattern.png);
      background-color: #222;
      min-height: 100%;
      font-size: 20px;
  }
  body {
      color: #fafafa;
      font-family: "lemon", "Courier New";
      line-height: 1.65;
      margin: 6rem auto 1rem;
      max-width: 48rem;
      /* padding: .25rem; */
  }
  pre {
      
  }
  pre, code {
      background-color: #333;
      font-family: "lemon", "Menlo", "Monaco", "Courier New";
      font-size: 12;
  }
  pre {
      padding: .5rem;
      line-height: 1.25;
      overflow-x: scroll;
  }
  blockquote {
      border-left: 3px solid #01ff70;
      padding-left: 1rem;
  }
  </style>
</head>
<body>
<h1 id="inspiration-for-the-stilts-programming-language">Inspiration for the Stilts Programming Language</h1>
<p><img src="images/Bike.jpg" /></p>
<p>    For a long time, other programming languages have irked me. Usually in small ways. Sometimes in very big ways. Every language that I’ve used has irked me in a big way at least once. But, what annoyed me the most when I had a major problem was I couldn’t fix it. Even if the problem with the language was hypothetically very fixable.</p>
<p>    You can read all the problems I’ve had with Java in <a href="Java.html">the Java article</a>. I’m about to talk a lot about C, but my time writing Java was equally inspirational.</p>
<p><br></p>
<p>    Eventually my disillusionment with Java led me to C. I came for speed. You might say that I had a need for it. C delivered on the speed promise, but it was also a lot more elegant than I expected. Everything is just ones and zeroes, and the language doesn’t disallow you from doing anything that you want with them. Knowing the layout of each and every byte of memory is very useful.</p>
<p><br></p>
<p>    Every programming language has problems. In my Java article, I ranted about Java’s. Python is incredibly slow, and the lack of strict typing makes writing and consuming large APIs difficult. Go is only just getting generics next month (Feb 2022), absolutely crippling the language for a lot of uses. C++ syntax, APIs, UB, and lifetime semantics are absolute garbage, and the language itself adds very little value on top of C. Opinionated languages like Rust and Haskell have trouble taking off due to the learning curve, and generally take a lot longer to write a program in than a minimally opinionated language with lots of features like Python.</p>
<p>    I think it’s safe to say that C has two problems. First is that it takes so long to get anything done. It’s honestly absurd. The standard library doesn’t have any containers. If you want a list, or a set, or a hashmap, you’ve got to implement it yourself. Traditionally you would have to implement it over and over again for each type you need a list or a set or hashmap for. This gets old very fast, but it’s a solved problem in other languages.</p>
<p>    The other problem that C faces is undefined behavior. Even if you are already intimately familiar with undefined behavior (UB), I recommend you read this incredible series of articles by Chris Lattner, creator of LLVM. If you’ve heard of it but never delved deep into it, then this view of UB might blow your mind a little bit.</p>
<p><br></p>
<ul>
<li><a href="https://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html">What Every C Programmer Should Know About Undefined Behavior #1/3</a></li>
<li><a href="https://blog.llvm.org/2011/05/what-every-c-programmer-should-know_14.html">What Every C Programmer Should Know About Undefined Behavior #2/3</a></li>
<li><a href="https://blog.llvm.org/2011/05/what-every-c-programmer-should-know_21.html">What Every C Programmer Should Know About Undefined Behavior #3/3</a></li>
</ul>
<p><br></p>
<p>Then, once you’re done with those, head over to this article by Ralph Lieven to learn about why it’s a problem and the history of how it got to be this way.</p>
<p><a href="https://raphlinus.github.io/programming/rust/2018/08/17/undefined-behavior.html"> <img src="images/Anything_is_Possible_With_UB.jpg"> </a> <a href="https://raphlinus.github.io/programming/rust/2018/08/17/undefined-behavior.html">Anything is Possible with Undefined Behavior</a></p>
<p><br></p>
<p>    Perhaps the dirtiest secret of undefined behavior is… it’s not that bad. Once you know to avoid violations of strict aliasing, signed integer overflow, oversized shifts, uninitialized variables, out of bounds accesses, and dereferencing null, it gets better. With the exception of signed integer overflow and creation (not just dereferencing) of invalid pointers, which is actually unintuitive to have to avoid, good code doesn’t contain these things anyway. Once you’re used to it, it’s not too hard to write code that’s free of UB. Unfortunately though, even when you think your code is free of UB, there’s no way to be certain.</p>
<p align="center">
<img src="images/Nasal_Demons.jpg"> <br> By the time they start coming out of <br> your nose, it’s all over. <br><br>
</p>
<p>    However, once it’s all said and done, once the nasal demons (an affectionate term for UB bugs) have been vanquished, the finished C code that you’re left with is immensely valuable. It’s probably incredibly fast, at least compared to other languages, and as long as you’ve remained vigilant, it should also be very portable. But it also probably took a very long time to write. What if there were a way to write C code faster and safer, without taking a performance loss?</p>
<p>    Lots of languages have come come and gone that claim to improve upon C in exactly this way. C++ is of course the most successful of these languages, but there are others. In a sense, my own language is no different. My friend <a href="https://github.com/lerno">Christoffer</a> created a language called <a href="https://github.com/c3lang/c3c">C3</a>, which is also an inspiration for my own language. One of the big quality of life upgrades from C3 that I’m considering for my own language is that it provides is unified calling semantics for object methods. This would unify the C object design pattern with <code>obj.doThing(with)</code> syntax and perhaps prevent some extra typing.</p>
<p><br></p>
<h2 id="goals-of-stilts">Goals of Stilts</h2>
<p>    I created Stilts because I want to right the wrongs of the other languages that I’ve used. Specifically, the wrongs of C, Java, and C++.</p>
<p>    I’ve been asked over and over again “Why not just use C++?” I think that’s a very fair question. Initially, I thought to myself “because I want to write a programming language.” While it would have been okay to leave it at that, over time my thoughts on the matter developed. After thinking about it some more, the answer I’ve settled on is “Because I hate writing C++, and I don’t want to do it anymore.”</p>
<p>    Stilts and C++ have basically the same goals. A C-compatible language for writing performant code faster. Additionally, C++ is a more mature and more powerful language that can do anything Stilts can and more. But also, ask any C++ programmer about the language’s problems, and they won’t be able to stop talking. Such a discussion would probably be too lengthy for this article, and there is a 100% chance that it would start fights. But I am not alone in my distaste. There have been <a href="http://harmful.cat-v.org/software/c++/coders-at-work">many prominent voices</a> in the programming community that have voiced the same opinion.</p>
<p align="center">
<br> <img src="images/cpp_phases.png" width=400 height=568> <br> I have found there’s an incredible <br> amount of truth to this meme. <br><br>
</p>
<p>    Since I don’t need to justify my dislike for C++ further, I will not. Instead, I would prefer to re-evaluate what I need from a language, and make a fresh start. At very least, I know that taking this plunge will make me a better programmer. Even if Stilts never becomes usable.</p>
<p><br></p>
<h2 id="describing-the-language">Describing the Language</h2>
<p>    Let’s start with what I don’t need. The first thing that I don’t need is a scripting language. Python has me covered. It is more mature, has good syntax depending on who you ask, and supports everything that I need and far more.</p>
<p>    The second thing that I don’t need is a language that leaves performance on the table. If I were okay with that I would just go back to Java, or maybe pick up Rust or Go.</p>
<p>    I also don’t need a language that’s underpowered. I don’t need another language that looks down on its users. There should be no borrow checker to get in the way, and no time wasted on checking if exceptions have been thrown. I crave raw, unadultered, absolute power. I don’t need a language that holds my hand.</p>
<p>    To characterize Stilts through an overly dramatic metaphor, suppose I were to compare Java and Stilts to knives. The two languages solve two very different problems. What I need is not a quality cooking knife with safety features so my employees don’t hurt themselves too badly. I’m not afraid of cutting myself. In fact, what I’m really looking for is a katana so strong and sharp and thin that I can obliterate my opponents faster than they can blink. I don’t care if I accidentally knick my thumb with it, or forget to type <code>delete</code>. I can bandage it up later. Both tools solve a problem, and do it well. One is useful to coroporations, and hopefully the other is useful for for hackers (in the older sense of the word).</p>
<p>Java and cooking knives are not very flashy, but they create a lot of revenue. Significantly more than Stilts ever will.</p>
<p><br></p>
<p>    Since the the goal is to write C as quickly and efficiently as possible, a number of things need to happen to facilitate this.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1"></a><span class="ss">* </span>Clean APIs should be easy to write.</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="ss">* </span>Unlike C, syntax should stay out of the user&#39;s way.</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="ss">* </span>Some of C&#39;s sharp edges should be smoothed over. Particularly UB.</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="ss">* </span>Nothing should be hidden from the user.</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="ss">* </span>It should be obvious what Stilts features map to what C design patterns.</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="ss">* </span>Interop</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="ss">  * </span>Writing bindings to C libraries should be quick and easy.</span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="ss">  * </span>Mixing Stilts and C together in the same file should be quick and easy.</span></code></pre></div>
<p>It should have libraries, and to facilitate that it should be very fast to write bindings for.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb2-1"><a href="#cb2-1"></a><span class="ss">* </span>C++, but:</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="ss">  * </span>Without the horrible syntax</span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="ss">  * </span>Without worse UB</span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="ss">* </span>C, but with a standard library as good as Java&#39;s, but retaining the speed of C.</span>
<span id="cb2-5"><a href="#cb2-5"></a>faster and easier to write, with UB that&#39;s easier to deal with.</span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="ss">* </span>Java, but with manual memory management and nofast and manually managed.</span></code></pre></div>
</body>
</html>
